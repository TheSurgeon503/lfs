<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../general.ent">
  <!ENTITY site               SYSTEM "../appendices/rc.site.script">
  %general-entities;
]>

<sect1 id="ch-config-usage" revision="s6">
  <?dbhtml filename="usage.html"?>

  <title>S6 Usage and Configuration</title>

  <para>*** Add more info about S6 here. ***</para>

  <para>Now setup some essential scripts for booting.</para>

<!--
  Following setup is taken from
    https://skarnet.org/software/s6-linux-init/quickstart.html
  It builds the required programs (init, reboot, ...).
  
  The system is bootable with this config, but it has
  * only one tty (tty1)
  * root-fs is mounted R/O
  * no virtual filesystems (like /proc) are mounted
  * messages breaks thru to console
  
  ... but it boots ;-)
-->  
  <para>Make sure that the configuration directory exists:</para>
  
<screen><userinput>mkdir -p /etc/s6-linux-init</userinput></screen>  

  <para>Setup a temporary directory:</para>

<screen><userinput>tmpdir=$(mktemp -d)</userinput></screen>  

  <para>Create essential programs and move them to a
  directory representing the current setup:</para>

<screen><userinput>s6-linux-init-maker -1 -G "/sbin/agetty 38400 tty1" $tmpdir
mv $tmpdir /etc/etc/s6-linux-init/current
</userinput></screen>  

  <para>Install the essential programs in the file system:</para>

<screen><userinput>cp -av /etc/etc/s6-linux-init/current/bin/* /sbin/</userinput></screen>  

</sect1>
